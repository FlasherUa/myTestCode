var App=function(){var e={};e.x=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},e.send=function(t,n,r,o,a){void 0===a&&(a=!0);var i=e.x();i.open(r,t,a),i.onreadystatechange=function(){4==i.readyState&&n(i.responseText)},i.send(o)},e.get=function(t,n,r,o){var a=[];for(var i in n)a.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));e.send(t+(a.length?"?"+a.join("&"):""),r,"GET",null,o)},e.post=function(t,n,r,o){var a;if(n instanceof FormData)a=n;else{var i=[];for(var s in n)i.push(encodeURIComponent(s)+"="+encodeURIComponent(n[s]));a=i.join("&")}e.send(t,r,"POST",a)},window.App||(window.App={});var t=window.App;t.Controllers={},t.Controllers.Pages=function(){function e(e,n){return t.curLang||(t.curLang="EN"),void 0!==t.LANGS[t.curLang][e]?t.LANGS[t.curLang][e]:e}var n=function(n){void 0!==n||(n=r()),t.Template.out({Page:{title:e("welcome1"),description:e("descr1"),nextLang:e("nextLang"),langHint:e("langHint"),contents:{First:{contents:n}}}})},r=function(){var n=t.formModel=[t.models.user[1],t.models.user[2]],r=a(n);return{FormOuter:{title:e("loginForm"),contents:r,action:"login"}}},o=function(){var n=t.formModel=t.models.user,r=a(n);return{FormOuter:{title:e("registerForm"),contents:r,action:"register"}}},a=function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];for(var a in o)if(o.hasOwnProperty(a)){var s=o[a],l=i(s,a),u=s[1]&&s[1][0]&&s[1][0]>0?"*":"",c={InputOuter:{id:a,title:a,contents:l,errMsg:e("err_"+s[0]),required:u}};n.push(c)}}return n},i=function(e,t){var n;switch(e[0]){case"file":n={input_file:{id:t}};break;default:n={input_text:{title:t,id:t,type:e[0]}}}return n};return{switchLang:function(){"EN"===t.curLang?t.curLang="UA":t.curLang="EN"},printLoading:function(){},printLoginPageController:n,printRegisterPageController:function(){n(o())},printUserPageController:function(){var n=t.userData;t.Template.out({Page:{title:e("welcome2")+n.Name+"!",description:e("descr1"),nextLang:e("nextLang"),langHint:e("langHint"),contents:{Logged:{Name:n.Name,data:n}}}})},lang:e}}(),window.App||(window.App={}),t.Controllers.Submit=function(){var n=function(n,r){var o=new FormData(n);e.post("api/"+r,o,t.onResponse,!1)},r=function(e){var n=o(e);return t.Validate.validateForm(n,t.formModel)},o=function(e){for(var t={},n=e.elements,r=0;r<n.length;r++)"submit"!==n[r].type&&(t[n[r].name]=n[r].value);return t},a=function(e){for(var t=0;t<e.length;t++){var n=e[t];i(n[1],n[0])}},i=function(e,t){var n=document.getElementById("container_"+e);n.classList.add("alert"),n.classList.add("alert-danger")},s=function(e){for(var t=e.getElementsByClassName("alert");;){if(void 0===t[0])return;t[0].classList.remove("alert-danger"),t[0].classList.remove("alert")}};return{submit:function(e,t){s(e);var o=r(e);return!1!==o&&a(o.errors),n(e,t),!1},addFormErrors:a}}(),t.LANGS||(t.LANGS={}),t.LANGS.EN={welcome1:"Welcome to my demo site!",welcome2:"Welcome to my demo site, ",descr1:"Please visit <a href='https://github.com/FlasherUa/myTestCode' target='_blank'>this project GitHub</a> for  documentation and source code",loginForm:"Login Form",registerForm:"Register Form",nextLang:"Укр",langHint:"Ввімкнути Українську мову",err_file:"Please select image of .jpg, .png or .gif type",err_text:"Please enter a value",err_password:"Please enter a value including big and small latin letters and digits, 8-15 symbols",err_email:"Please enter a valid email "},t.LANGS||(t.LANGS={}),t.LANGS.UA={welcome1:"Ласкаво прошу до мого демо сайту!",descr1:"Завітайте на <a href='https://github.com/FlasherUa/myTestCode' target='_blank'>GitHub цього проекту</a> там є документація і вихідний код",loginForm:"Форма входу",registerForm:"Форма реєстрації",nextLang:"En",langHint:"Switch to English",err_file:"Будь-ласка оберіть картинку з типом .jpg, .png чи .gif ",err_text:"Будь-ласка введіть значення",err_password:"Будь-ласка введіть значення з великими,  малими латинськими літерами та цифрами, 8-15 символів",err_email:"Будь-ласка введіть email ","You are not logged":"Ви не зайшли",Please:"Будь-ласка",Register:"Зареєструйтеся",Login:"Ввійдіть",or:"чи",Submit:"Відіслати",Name:"Ім'я",Password:"Пароль","Repeat Password":"Повтор паролю",Phone:"Телефон",Country:"Країна",City:"Місто",Photo:"Фото"},t.helpers={key:function(e){for(var t in e)if(e.hasOwnProperty(t))return t},getResponse:function(e){if("NOT FOUND"===e)return!1;try{var t=JSON.parse(e)}catch(e){return console.error(e),!1}return t}},t.onResponse=function(){var e=function(e){window.location.hash!==e?window.location.hash=e:t.Router(e)};return function(n){var r=t.helpers.getResponse(n);if(r){var o=t.helpers.key(r);switch(o){case"notLogged":e("#login");break;case"logged":t.userData=r[o],e("#userInfo")}}}}(),window.App||(window.App={}),t.Router=function(e,n){switch(e){case"submit":return t.Controllers.Submit.submit(n[0],n[1]);case"#register":t.Controllers.Pages.printRegisterPageController();break;case"#userInfo":void 0===t.userData?t.Controllers.Pages.printLoading():t.Controllers.Pages.printUserPageController();break;case"switchLang":t.Controllers.Pages.switchLang(),t.Router(t.state);break;case"#login":t.Controllers.Pages.printLoginPageController();break;default:t.Controllers.Pages.printLoading()}},window.App||(window.App={}),(t=window.App).Template=function(){function e(e,n){for(var o,a=/%([^%]+)?%/g;o=a.exec(e);){var i=n&&void 0!==n[o[1]]?n[o[1]]:o[1];i="string"==typeof i||i instanceof String?i:r(i),i=t.Controllers.Pages.lang(i),e=e.replace(o[0],i)}return e}function n(e,t){var n=document.getElementById(e),r="";return n&&(r=n.innerHTML),r}function r(t){var o="";if(t.constructor===Array)for(var a=0;a<t.length;a++)o+=r(t[a]);for(var i in t)t.hasOwnProperty(i)&&(o+=e(n(i),t[i]));return o}return{out:function(e,t){var n=r(e);t||(t="main");var o=document.getElementById(t);o&&(o.innerHTML=n)},parseTemplObject:r}}(),t.Validate=function(){var e=function(e,n){var r=n[0],o=!1;return void 0!==t[r]&&(o=t[r](e,n[1])),o},t={text:function(e,t){return!t||(void 0!==t[0]&&t[0]>0&&e.length<t[0]?"notValid":!(t[1]&&t[1]>0&&e.length>t[1])||"notValid")},email:function(e,n){var r=t.text(e,n);return!0!==r?r:!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"notValid"},phone:function(e,n){var r=t.text(e,n);return!0!==r?r:!!/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e)||"notValid"},password:function(e,n){var r=t.text(e,n);if(!0!==r)return r;var o=/[a-z]/,a=/[A-Z]/;return!!(/[0-9]/.test(e)&&o.test(e)&&a.test(e))||"notValid"},file:function(e,t){var n=e.split(".").pop();return n=n.toLowerCase(),!e||-1!==["jpeg","jpg","gif","png"].indexOf(n)||"notValid"}};return{validateField:e,validateForm:function(t,n){for(var r=n.length,o=[],a=0;a<r;a++){var i=n[a];for(var s in i)if(i.hasOwnProperty(s)){var l=void 0!==t[s]?t[s]:"",u=e(l,i[s]);"Repeat Password"===s&&t[s]!==t.Password&&(u=!0),!0!==u&&o.push([u,s])}}return o.length>0&&{errors:o}}}}(),void 0!==t||(window.App={}),function(){var n=function(e){t.state=e,void 0!==t.Router&&t.Router(t.state)};t.curLang="EN",e.get("api",null,t.onResponse),window.addEventListener("hashchange",function(){n(window.location.hash)}),n(window.location.hash)}(),window.App||(window.App={}),(t=window.App).models={},t.models.user=[{Name:["text",[5,50]]},{Email:["email",[5,50]]},{Password:["password",[8,25]]},{"Repeat Password":["password",[8,25]]},{Phone:["text",[5,20]]},{Country:["text",[0,25]]},{City:["text",[0,25]]},{Photo:["file",[0]]}]}();